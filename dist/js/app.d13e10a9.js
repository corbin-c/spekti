(function(t){function e(e){for(var s,r,a=e[0],c=e[1],l=e[2],d=0,h=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&h.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/spekti/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("a026"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid",attrs:{id:"app"}},[n("nav",{staticClass:"row navbar sticky-top navbar-expand navbar-light bg-light border-bottom border-info"},[n("router-link",{staticClass:"text-decoration-none",attrs:{to:"/",title:"Go back to articles list"}},[n("h2",{staticClass:"text-info"},[t._v(t._s(t.appName))])]),!1!==t.$store.state.connected?n("ul",{staticClass:"navbar-nav ml-auto"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{title:"Manage sources"},on:{click:function(e){return t.setModal({component:"sources"})}}},[t._v("Sources")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{title:"Manage tags"},on:{click:function(e){return t.setModal({component:"tags"})}}},[t._v("Tags")])]),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/notes",title:"Manage notes"}},[t._v("Notes")])],1)]):t._e()],1),n("router-view"),n("app-modal",{attrs:{component:t.modal.component,details:t.modal.details}}),n("footer",{staticClass:"fixed-bottom text-right border-top border-info bg-light d-flex justify-content-between"},[n("small",{staticClass:"p-2"},[t.$store.state.connected?n("a",{staticClass:"text-danger",attrs:{title:"Logout from Spekti"},on:{click:t.logout}},[t._v(" Logout ")]):t._e()]),t._m(0)])],1)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",{staticClass:"p-2"},[n("a",{attrs:{href:"https://github.com/corbin-c/spekti",title:"Spekti repository by corbin-c on Github"}},[t._v("Contribute on Github")])])}],r=n("1da1"),a=(n("96cf"),n("ac1f"),n("1276"),n("841c"),n("d3b7"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[this.component?n("div",[n("aside",{staticClass:"modal d-block",attrs:{tabindex:"-1"},on:{click:t.hide}},[n("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",attrs:{id:"dialog"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.close}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])]),n(t.currentComponent,{tag:"component",attrs:{details:t.details}})],1)])]),n("div",{staticClass:"modal-backdrop"})]):t._e()])}),c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-scroll"},[n("ul",{staticClass:"sources list-group list-group-flush"},t._l(t.$store.state.rss,(function(e,s){return n("li",{key:e,staticClass:"list-group-item  d-flex justify-content-between align-items-center"},[n("commit-link",{staticClass:"text-secondary text-decoration-none",attrs:{title:"view only articles from this source",to:"/source/"+s,event:"hideModal"}},[t._v(t._s(t.sourceReplace(e)))]),n("button",{staticClass:"badge badge-pill",attrs:{title:"Remove this source"},on:{click:function(n){return t.removeSource(e)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])],1)})),0),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sourceUrl,expression:"sourceUrl"}],class:t.inputClasses,attrs:{type:"text",placeholder:"New source URL"},domProps:{value:t.sourceUrl},on:{input:function(e){e.target.composing||(t.sourceUrl=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.addSource}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},u=[],d=(n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{attrs:{href:t.to,title:t.title},on:{click:t.navigate}},[t._t("default")],2)}),h=[],f={methods:{navigate:function(t){t.preventDefault(),this.statekey&&this.payload&&this.$store.commit("fill",{key:this.statekey,content:this.payload}),this.event&&this.$root.$emit(this.event),this.$router.push({path:this.to})}},props:["to","title","statekey","payload","event"]},g=f,p=n("2877"),m=Object(p["a"])(g,d,h,!1,null,null,null),v=m.exports,b={data:function(){return{sourceUrl:""}},components:{"commit-link":v},watch:{},computed:{inputClasses:function(){var t="form-control mx-auto";return""===this.sourceUrl||this.testURL(this.sourceUrl)||(t+=" is-invalid"),t},disabled:function(){return!this.testURL(this.sourceUrl)}},methods:{sourceReplace:function(t){return t.replace(/^http[s]*:\/\/(www.)*/,"")},testURL:function(t){var e=/^(http|https):\/\/[^ "]+$/;return e.test(t)},addSource:function(){this.testURL(this.sourceUrl)?(this.$store.dispatch("addRSS",this.sourceUrl),this.sourceUrl=""):alert("This URL doesn't look right, please try again")},removeSource:function(t){this.$store.dispatch("removeRSS",t)}},props:["update"]},k=b,w=Object(p["a"])(k,l,u,!1,null,null,null),y=w.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-body d-flex justify-content-around flex-wrap align-content-around"},[0==t.$store.getters.allTags.length?n("p",[t._v("There is no tag yet. Start reviewing or tagging articles to see something here.")]):t._l(t.$store.getters.allTags,(function(e){return n("router-link",{key:e,staticClass:"btn btn-outline-secondary my-2 mx-1",attrs:{to:"/tag/"+e}},[t._v(t._s(e))])}))],2)},x=[],_={},S=_,$=Object(p["a"])(S,C,x,!1,null,null,null),O=$.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal-body d-flex justify-content-around flex-wrap align-content-around"},[0==t.allTags.length?n("p",[t._v("There is no tag yet. You can add a custom tag using the input below.")]):t._l(t.allTags,(function(e){return n("button",{key:e,class:t.tagClasses(e),attrs:{title:(t.tagsAbout.includes(e)?"Remove":"Add")+" tag "+e+" from this article"},on:{click:function(n){return t.toggle(e)}}},[t._v(" "+t._s(e))])}))],2),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag,expression:"newTag"}],staticClass:"form-control mx-auto",attrs:{type:"text",placeholder:"New tag"},domProps:{value:t.newTag},on:{input:function(e){e.target.composing||(t.newTag=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.addTag}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},j=[],A=(n("4de4"),{data:function(){return{newTag:""}},computed:{tagsAbout:function(){return this.$store.getters.tagsAbout(this.details.url).tags||[]},disabled:function(){return 0==this.newTag.length},allTags:function(){return this.$store.getters.allTags.filter((function(t){return!["fav","reviewed"].includes(t)}))},aboutTags:function(){return this.tagsAbout.filter((function(t){return!["fav","reviewed"].includes(t)}))}},methods:{tagClasses:function(t){return{btn:!0,"my-2":!0,"mx-1":!0,"btn-outline-secondary":!this.tagsAbout.includes(t),"btn-secondary":this.tagsAbout.includes(t)}},addTag:function(){this.toggle(this.newTag),this.newTag=""},toggle:function(t){this.$store.dispatch("tagArticle",{url:this.details.url,title:this.details.title,tag:t})}},props:["update","details"]}),R=A,T=Object(p["a"])(R,N,j,!1,null,null,null),M=T.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal-body justify-content-around flex-wrap align-content-around"},[0==t.allNotes.length?n("p",[t._v("There is no note yet. You can add a note using the input below.")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.allNotes,(function(e){return n("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("span",{staticClass:"w-50"},[t._v(t._s(e.content))]),n("span",[t._v(t._s(new Date(e.timestamp).toLocaleDateString()))]),n("span",{staticClass:"badge-edit badge badge-pill",on:{click:function(n){return t.editNote(e.id,e.content)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-16"}})])]),n("span",{staticClass:"badge-delete badge badge-pill",on:{click:function(n){return t.deleteNote(e.id)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])])})),0)]),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newNote,expression:"newNote"}],ref:"input",staticClass:"form-control mx-auto",attrs:{type:"text",placeholder:"New note"},domProps:{value:t.newNote},on:{input:function(e){e.target.composing||(t.newNote=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.submitNote}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},I=[],D={data:function(){return{newNote:"",edit:!1}},computed:{allNotes:function(){return this.$store.getters.notesAbout(this.details.url)},disabled:function(){return 0==this.newNote.length}},methods:{submitNote:function(){!1===this.edit?this.addNote():(this.$store.dispatch("editNote",{content:this.newNote,id:this.edit,url:this.details.url}),this.newNote="",this.edit=!1)},addNote:function(){this.$store.dispatch("addNote",{content:this.newNote,url:this.details.url}),this.newNote=""},deleteNote:function(t){this.edit=!1,this.newNote="",this.$store.dispatch("removeNote",t)},editNote:function(t,e){this.$refs.input.focus(),this.edit=t,this.newNote=e}},props:["update","details"]},P=D,L=Object(p["a"])(P,E,I,!1,null,null,null),U=L.exports,F={computed:{title:function(){return"tags-about"==this.component?"tags about this article":"notes-about"==this.component?"notes about this article":this.component},currentComponent:function(){return["sources","tags","tags-about","notes-about"].indexOf(this.component)>=0&&this.component+"-view"}},components:{"sources-view":y,"tags-view":O,"tags-about-view":M,"notes-about-view":U},methods:{hide:function(t){"ASIDE"===t.target.nodeName&&this.$root.$emit("hideModal","")},close:function(){this.$root.$emit("hideModal","")}},props:["component","details"]},G=F,W=Object(p["a"])(G,a,c,!1,null,null,null),J=W.exports,Y={name:"App",data:function(){return{appName:"Spekti",serviceWorker:!1,modal:!1}},mounted:function(){var t=this,e=window.location.search.split("?path")[1];"undefined"!==typeof e&&(e=decodeURIComponent("/"+e),this.$router.push({path:e})),this.isOnline(),setInterval((function(){t.isOnline()}),12e4)},created:function(){this.serviceWorker&&this.registerWorker(),this.$root.$on("hideModal",this.hideModal),this.$root.$on("showModal",this.setModal)},components:{"app-modal":J},methods:{logout:function(t){t.preventDefault(),localStorage.clear(),this.$store.commit("logoff")},isOnline:function(){var t=this;Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spekti/online");case 2:return n=e.sent,e.next=5,n.text();case 5:n=e.sent,t.$store.dispatch("onlineAction",n.includes("true"));case 7:case"end":return e.stop()}}),e)})))()},registerWorker:function(){"serviceWorker"in navigator&&(navigator.serviceWorker.register("/spekti/service-worker.js").then((function(t){return t.update()})),navigator.serviceWorker.onmessage=function(t){var e=JSON.parse(t.data);"GET"==e.method?(e.body={},["rss","notes","tags","login","gist","status"].forEach((function(t){e.body[t]=localStorage.getItem(t)||""}))):"SET"==e.method&&localStorage.setItem(e.key,e.body),navigator.serviceWorker.controller.postMessage(JSON.stringify(e))},navigator.serviceWorker.ready.then((function(t){return t.sync.register("gistSync")})))},setModal:function(t){this.modal=t},hideModal:function(){this.setModal(!1)}}},B=Y,H=Object(p["a"])(B,i,o,!1,null,null,null),z=H.exports,V=n("8c4f"),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[!1!==t.$store.state.login?n("router-view"):n("div",{staticClass:"text-center p-5 m-3"},[n("p",[t._v("In order to use Spekti, please login to your GitHub account and authorize the app.")]),n("p",[t._v("Spekti only uses your GitHub account to store data as Gists.")]),n("button",{staticClass:"btn btn-info mt-2",on:{click:t.login}},[t._v("Login with GitHub "),n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#mark-github-16",width:"20",height:"20"}})])])])],1)},K=[],Q={mounted:function(){var t=localStorage.getItem("login");"false"!==t&&"undefined"!==typeof t&&null!==t&&this.$store.dispatch("loginAction",t)},methods:{login:function(){var t="e039324ddce920ed3111",e="https://corbin-c.github.io/spekti/callback";window.open("https://github.com/login/oauth/authorize?client_id="+t+"&redirect_uri="+e+"&scope=gist")}}},X=Q,Z=Object(p["a"])(X,q,K,!1,null,null,null),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:t.classes},[t.source?n("h2",{staticClass:"mb-3 col-12 text-secondary d-flex justify-content-between align-items-center",staticStyle:{"max-width":"100%",width:"100%",flex:"1 0 auto"}},[t._v(" Articles from "+t._s(t.sourceReplace)+" "),n("router-link",{staticClass:"small text-decoration-none text-info d-inline-block",staticStyle:{"font-size":".5em"},attrs:{to:"/",title:"View articles from all sources"}},[t._v("All articles")])],1):t._e(),t.noSources?n("article",{staticClass:"card"},[n("p",{staticClass:"card-body"},[t._v("No source has been found. You can start "),n("a",{attrs:{href:"#",title:"add some content"},on:{click:t.showSources}},[t._v("adding some RSS feeds")]),t._v(" now !")])]):t._l(t.articles,(function(t){return n("article-card",{key:t.url,attrs:{content:t}})})),n("div",{ref:"scrollIndicator",staticClass:"d-flex justify-content-center",staticStyle:{"max-width":"100%",width:"100%",flex:"1 0 auto","margin-top":"2rem","margin-bottom":"4rem"}},[t.moreContent?n("button",{staticClass:"btn btn-outline-info",on:{click:t.loadMore}},[t._v("Load more contentâ€¦")]):t._e()])],2)},nt=[],st=n("2909"),it=(n("d81d"),n("9911"),n("fb6a"),n("3ca3"),n("ddb0"),n("99af"),n("b85c")),ot=n("d4ec"),rt=n("bee2"),at=(n("b64b"),"https://spekticors.herokuapp.com/"),ct=[{title:["title"]},{link:["link"]},{img:["enclosure"]},{abstract:["content:encoded","description"]},{date:["pubDate","dc:date"]},{author:["author","dc:creator"]}],lt=function(t){var e=new Date(t);return"Invalid Date"==e&&(t=t.split(", ")[1],t=t.replace(/ \w+$/,""),e=new Date(t)),e},ut={enclosure:function(t){return null!==t.getAttribute("type")&&t.getAttribute("type").indexOf("image")>=0?t.getAttribute("url"):""},"content:encoded":function(t){return"#cdata-section"==t.firstChild.nodeName?(t=t.firstChild.data,t=(new DOMParser).parseFromString(t,"text/html").body.textContent):(t=t.textContent,t=(new DOMParser).parseFromString(t,"text/html").body.textContent),t},description:function(t){return t=t.textContent,t=(new DOMParser).parseFromString(t,"text/html").body.textContent,t},pubDate:function(t){return lt(t.textContent)},"dc:date":function(t){return lt(t.textContent)},other:function(t){return t.textContent}},dt=function(){function t(e){Object(ot["a"])(this,t),this.url=e,this.feed=[]}return Object(rt["a"])(t,[{key:"loadFeed",value:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(at+this.url,{headers:{"spekti-no-cache":!0}});case 2:return e=t.sent,t.next=5,e.text();case 5:e=t.sent,e=(new DOMParser).parseFromString(e,"text/xml"),this.parseFeed(e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"parseFeed",value:function(t){var e,n=this,s=Object(st["a"])(t.querySelectorAll("item")),i=Object(it["a"])(s);try{var o=function(){var t=e.value,s={source:n.url};ct.map((function(e){s[Object.keys(e)[0]]="";var i,o=Object(it["a"])(e[Object.keys(e)[0]]);try{for(o.s();!(i=o.n()).done;){var r=i.value;try{s[Object.keys(e)[0]]=n.getElement(t,r);break}catch(a){}}}catch(c){o.e(c)}finally{o.f()}})),s.img=""==s.img?n.getImage(t):s.img,n.feed.push(s)};for(i.s();!(e=i.n()).done;)o()}catch(r){i.e(r)}finally{i.f()}}},{key:"getElement",value:function(t,e){try{var n=t.getElementsByTagName(e)[0];return"undefined"===typeof ut[e]?ut.other(n):ut[e](n)}catch(s){throw new Error("Element not found")}}},{key:"getImage",value:function(t){try{var e=t.querySelector("img");return e.getAttribute("src")}catch(s){try{var n=t.getElementsByTagName("content:encoded")[0];if("#cdata-section"==n.firstChild.nodeName)return n=n.firstChild.data,n=(new DOMParser).parseFromString(n,"text/html"),this.getImage(n)}catch(i){return""}}}}]),t}(),ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"col"},[n("div",{staticClass:"card mb-3"},[n("commit-link",{staticClass:"text-secondary text-decoration-none",attrs:{to:"/article/",statekey:"currentArticle",payload:t.content,title:"Read this article: "+t.content.title}},[t.content.img.length>0?n("img",{staticClass:"card-img-top",attrs:{src:t.content.img,alt:t.content.title}}):t._e(),n("h3",{staticClass:"card-header card-title"},[t._v(" "+t._s(t.content.title)+" ")])]),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text"},[t._v(t._s(t.abstract))])]),n("div",{staticClass:"card-footer"},[n("p",{staticClass:"card-text"},[n("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.footer)),n("a",{attrs:{href:t.content.link,title:"Open article Â« "+t.content.title+" Â»",target:"_blank"}},[t._v("Source")])])])])],1)])},ft=[],gt=(n("a15b"),{components:{"commit-link":v},computed:{footer:function(){return""==this.date&&""==this.content.author?"":""==this.content.author?this.date:""==this.content.date?this.content.author+" â€“ ":this.content.author+" â€“ "+this.date},date:function(){try{return this.content.date.toLocaleDateString()+" â€“ "+this.content.date.toLocaleTimeString()+" â€“ "}catch(t){return""}},abstract:function(){var t,e=this.content.abstract.split(" "),n=[],s=Object(it["a"])(e);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(n.push(i),n.join(" ").length>300)break}}catch(o){s.e(o)}finally{s.f()}return n.join(" ")+" [â€¦]"}},props:["content"]}),pt=gt,mt=Object(p["a"])(pt,ht,ft,!1,null,null,null),vt=mt.exports,bt={data:function(){return{observer:null,lastRSS:[]}},computed:{moreContent:function(){return this.availableArticles.length>0&&this.availableArticles.length>this.articles.length},sourcesChanged:function(){if(this.lastRSS.length!==this.rss.length)return!0;var t=Object(st["a"])(this.rss).sort();for(var e in t)if(this.lastRSS[e]!==t[e])return!0;return!1},sourceReplace:function(){return this.rss[this.source]?this.rss[this.source].replace(/^http[s]*:\/\/(www.)*/,""):""},availableArticles:function(){var t=this.$store.getters.taggedContent("reviewed").map((function(t){return t.url}));return this.allArticles.filter((function(e){return!t.includes(e.link)}))},allArticles:function(){var t=this;return this.source?this.$store.state.articles.filter((function(e){return e.source===t.rss[t.source]})):this.$store.state.articles},rss:function(){return this.$store.state.rss},noSources:function(){return 0===this.rss.length},articles:function(){var t=this.$store.state.lastItem[this.source||"*"]||12;return Object(st["a"])(this.availableArticles).sort((function(t,e){return e.date-t.date})).slice(0,t)},classes:function(){return{row:!this.noSources,"row-cols-1":!this.noSources,"row-cols-sm-2":!this.noSources,"row-cols-lg-3":!this.noSources,"row-cols-xl-4":!this.noSources,"mt-3":!this.noSources,"mb-5":!this.noSources,"text-center":this.noSources,"p-5":this.noSources,"m-3":this.noSources}}},components:{"article-card":vt},mounted:function(){this.loadContent(),this.$nextTick((function(){var t={root:null,rootMargin:"0px",threshold:[0,1]};this.observer=new IntersectionObserver(this.handleIntersect,t),this.observer.observe(this.$refs.scrollIndicator)}))},updated:function(){this.sourcesChanged&&this.loadContent()},methods:{loadMore:function(){this.moreContent&&this.$store.commit("incrementLastItem",this.source)},handleIntersect:function(t){t[0].isIntersecting&&this.loadMore()},loadContent:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.noSources){e.next=2;break}return e.abrupt("return");case 2:return t.lastRSS=Object(st["a"])(t.rss).sort(),n=[],e.next=6,Promise.all(t.rss.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new dt(s),e.next=3,s.loadFeed();case 3:n=[].concat(Object(st["a"])(n),Object(st["a"])(s.feed)),0==t.$store.state.articles.length&&t.$store.commit("newFeed",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.$store.commit("newFeed",n);case 7:case"end":return e.stop()}}),e)})))()},showSources:function(t){t.preventDefault(),this.$root.$emit("showModal",{component:"sources"})}},props:["source"]},kt=bt,wt=Object(p["a"])(kt,et,nt,!1,null,null,null),yt=wt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3 mb-5"},[n("div",{staticClass:"card mb-3"},[n("h3",{staticClass:"card-header card-title"},[t._v('Articles tagged "'+t._s(t.tag)+'"')]),0==t.$store.getters.taggedContent(t.tag).length?n("p",{staticClass:"card-body card-text"},[t._v("There is no content for this tag yet. Start reviewing or tagging articles to see something here.")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.$store.getters.taggedContent(t.tag),(function(e){return n("li",{key:e.url,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("commit-link",{staticClass:"text-secondary text-decoration-none",attrs:{to:"/article/",statekey:"currentArticle",payload:{link:e.url},title:"Read this article: "+e.title}},[t._v(" "+t._s(e.title)+" ")]),t._l(t.$store.getters.otherTags(e.url,t.tag),(function(e){return n("router-link",{key:e,staticClass:"badge badge-info badge-pill",attrs:{title:"View more articles with this tag: "+e,to:"/tag/"+e}},[t._v(t._s(e))])})),n("button",{staticClass:"badge-delete badge badge-pill",attrs:{title:"untag this article"},on:{click:function(n){return t.removeTag(e.url)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])],2)})),0)])])},xt=[],_t={mounted:function(){this.$root.$emit("hideModal")},updated:function(){this.$root.$emit("hideModal")},methods:{removeTag:function(t){this.$store.dispatch("tagArticle",{url:t,tag:this.tag})}},components:{"commit-link":v},props:["tag"]},St=_t,$t=Object(p["a"])(St,Ct,xt,!1,null,null,null),Ot=$t.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3 mb-5"},[n("div",{staticClass:"card mb-3"},[n("h3",{staticClass:"card-header card-title"},[t._v("Notes")]),0==t.$store.state.notes.length?n("p",{staticClass:"card-body card-text"},[t._v("There is no note yet. Write your first note now!")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.$store.state.notes,(function(e){return n("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("span",{staticClass:"w-75"},[t._v(t._s(e.content))]),n("span",[t._v(t._s(new Date(e.timestamp).toLocaleDateString()))]),e.url?n("commit-link",{staticClass:"badge badge-pill badge-source",attrs:{to:"/article",payload:{link:e.url},statekey:"currentArticle",title:"View article linked with this note"}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#link-16"}})])]):t._e(),n("button",{staticClass:"badge-edit badge badge-pill",attrs:{title:"Edit this note"},on:{click:function(n){return t.editNote(e.id,e.content)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-16"}})])]),n("button",{staticClass:"badge-delete badge badge-pill",attrs:{title:"Delete this note"},on:{click:function(n){return t.deleteNote(e.id)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])],1)})),0),n("div",{staticClass:"card-footer bg-light d-flex justify-content-around align-items-center"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newNote,expression:"newNote"}],ref:"input",staticClass:"form-control",attrs:{placeholder:"New note"},domProps:{value:t.newNote},on:{input:function(e){e.target.composing||(t.newNote=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.submitNote}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])])},jt=[],At={data:function(){return{newNote:"",viewArticle:!1,edit:!1}},computed:{disabled:function(){return 0==this.newNote.length}},components:{"commit-link":v},methods:{showArticle:function(t){this.viewArticle={title:"",link:t,author:"",date:"",img:""}},submitNote:function(){!1===this.edit?this.addNote():(this.$store.dispatch("editNote",{content:this.newNote,id:this.edit}),this.newNote="",this.edit=!1)},addNote:function(){this.$store.dispatch("addNote",{content:this.newNote}),this.newNote=""},deleteNote:function(t){this.edit=!1,this.newNote="",this.$store.dispatch("removeNote",t)},editNote:function(t,e){this.$refs.input.focus(),this.edit=t,this.newNote=e}},props:["update"]},Rt=At,Tt=Object(p["a"])(Rt,Nt,jt,!1,null,null,null),Mt=Tt.exports,Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("article",{staticClass:"card text-info mt-3"},[!1!==t.$store.login?n("p",{staticClass:"card-body"},[t._v("Yay! You're now connected to Github. You can close this window now.")]):t._e(),!1===t.$store.login&&t.error?n("p",{staticClass:"card-body"},[t._v("Sorry, something wrong happened. You should go back & try again.")]):t._e(),!1!==t.$store.login||t.error?t._e():n("p",{staticClass:"card-body"},[t._v("Connecting to Github... Please wait")])])])},It=[],Dt=(n("159b"),{data:function(){return{error:!1}},mounted:function(){this.$nextTick(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.grant();case 1:case"end":return t.stop()}}),t,this)}))))},methods:{grant:function(){var t=this,e=function(){var t=window.location.search.split("?")[1];if("undefined"===typeof t)return!1;var e={};return t.split("&").forEach((function(t){t=t.split("="),e[t[0]]=t[1]})),e}();console.log(e);var n="e039324ddce920ed3111";!1!==e&&1==Object.keys(e).length?Object(r["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,fetch("https://spekticors.herokuapp.com/?code="+e.code+"&client_id="+n,{method:"POST"});case 3:return i=s.sent,s.next=6,i.json();case 6:if(i=s.sent,!i.access_token){s.next=13;break}t.$store.dispatch("loginAction",i.access_token),window.opener.location.reload(),window.close(),s.next=15;break;case 13:throw console.error(i),new Error("Github identification failed");case 15:s.next=21;break;case 17:s.prev=17,s.t0=s["catch"](0),console.error(s.t0),t.error=!0;case 21:case"end":return s.stop()}}),s,null,[[0,17]])})))():(window.close(),this.$router.push({path:"/"}))}}}),Pt=Dt,Lt=Object(p["a"])(Pt,Et,It,!1,null,null,null),Ut=Lt.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"mt-3 mb-5"},[n("div",{staticClass:"card mb-3"},[n("div",{staticClass:"card-header row no-gutters align-items-center"},[t.content.img?n("img",{staticClass:"col-md-2 rounded",attrs:{src:t.content.img,alt:t.content.title}}):t._e(),n("h3",{staticClass:"card-title col-md-10 pl-4 my-auto"},[t._v(t._s(t.content.title))])]),n("tag-bar",{attrs:{url:t.content.link,title:t.content.title}}),n("div",{staticClass:"card-body"},[n("p",{class:t.contentClasses,domProps:{innerHTML:t._s(t.readerContent)}})]),n("button",{staticClass:"btn btn-info",attrs:{type:"button",id:"close","data-dismiss":"modal","aria-label":"Close"},on:{click:t.goBack}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])]),n("div",{staticClass:"card-footer"},[n("p",{staticClass:"card-text"},[n("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.footer)),n("a",{attrs:{href:t.content.link,title:"Open article Â« "+t.content.title+" Â»",target:"_blank"}},[t._v("Source")])])])])],1)])},Gt=[],Wt=n("884f"),Jt="https://spekticors.herokuapp.com/",Yt=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(Jt+e);case 2:return n=t.sent,t.next=5,n.text();case 5:return n=t.sent,n=(new DOMParser).parseFromString(n,"text/html"),n.originURI=e,t.abrupt("return",new Wt["a"](n).parse());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header sticky-top tagbar d-flex justify-content-around"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:(t.isFav?"un":"")+"fav this article"},on:{click:function(e){return t.tag("fav")}}},[t.isFav?n("svg",{staticClass:"d-inline"},[n("use",{staticClass:"regular",attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-fill-24"}}),n("use",{staticClass:"hover",attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-slash-fill-24"}})]):n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-24"}})])]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"mark this article as "+(t.isReviewed?"un":"")+"seen"},on:{click:function(e){return t.tag("reviewed")}}},[t.isReviewed?n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#eye-slash-24"}})]):n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#eye-24"}})])]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"add a custom tag to this article"},on:{click:t.showTags}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#plus-24"}})])]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"add a note to this article"},on:{click:t.showNotes}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-24"}})])])])},Ht=[],zt={computed:{tags:function(){return this.$store.getters.tagsAbout(this.url).tags||[]},isFav:function(){return this.tags.includes("fav")},isReviewed:function(){return this.tags.includes("reviewed")}},methods:{showTags:function(){this.$root.$emit("showModal",{component:"tags-about",details:{url:this.url,title:this.title}})},showNotes:function(){this.$root.$emit("showModal",{component:"notes-about",details:{url:this.url}})},tag:function(t){this.$store.dispatch("tagArticle",{url:this.url,title:this.title,tag:t})}},props:["url","title"]},Vt=zt,qt=Object(p["a"])(Vt,Bt,Ht,!1,null,null,null),Kt=qt.exports,Qt={data:function(){return{readerContent:""}},components:{"tag-bar":Kt},methods:{goBack:function(){this.$router.go(-1)}},computed:{content:function(){return this.$store.state.currentArticle},footer:function(){return""==this.date&&""==this.content.author?"":""==this.content.author?this.date:""==this.content.date?this.content.author+" â€“ ":this.content.author+" â€“ "+this.date},date:function(){try{return this.content.date.toLocaleDateString()+" â€“ "+this.content.date.toLocaleTimeString()+" â€“ "}catch(t){return""}},contentClasses:function(){return{"card-text":this.readerContent.length>0,"spinner-grow":0==this.readerContent.length,"my-3":0==this.readerContent.length,"text-info":0==this.readerContent.length}}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!==typeof t.content.link){e.next=3;break}return t.$router.push({path:"/"}),e.abrupt("return");case 3:return e.next=5,Yt(t.content.link);case 5:n=e.sent,t.content.title||(t.content.title=n.title),t.content.author||(t.content.author=""==n.byline?n.siteName:n.byline),t.readerContent=n.content;case 9:case"end":return e.stop()}}),e)})))()}},Xt=Qt,Zt=Object(p["a"])(Xt,Ft,Gt,!1,null,null,null),te=Zt.exports;s["a"].use(V["a"]);var ee=[{path:"/",component:tt,children:[{path:"",name:"Main",component:yt},{path:"tag/:tag",name:"Tag",component:Ot,props:!0},{path:"source/:source",name:"Source",component:yt,props:!0},{path:"notes",name:"Notes",component:Mt},{path:"article",name:"Article",component:te}]},{path:"/callback",name:"Callback",component:Ut},{path:"*",redirect:"/"}],ne=new V["a"]({mode:"history",base:"/spekti/",routes:ee}),se=ne,ie=n("ade3"),oe=n("5530"),re=(n("7db0"),n("a4d3"),n("e01a"),n("2f62")),ae=n("823f"),ce="SpektiGist",le=!1;s["a"].use(re["a"]);var ue=new re["a"].Store({state:{online:!1,login:!1,connected:!1,tags:[],notes:[],rss:[],articles:[],lastItem:{},currentArticle:{}},mutations:{incrementLastItem:function(t,e){"undefined"===typeof e&&(e="*"),t.lastItem=Object(oe["a"])(Object(oe["a"])({},t.lastItem),{},Object(ie["a"])({},e,(t.lastItem[e]||12)+12))},newFeed:function(t,e){e=e.filter((function(e){return!t.articles.some((function(t){return t.link==e.link}))})),e.length>0&&(t.articles=[].concat(Object(st["a"])(t.articles),Object(st["a"])(e)))},add:function(t,e){var n=e.key,s=e.content;t[n].push(s)},remove:function(t,e){var n=e.key,s=e.filter;t[n]=t[n].filter(s)},edit:function(t,e){var n=e.key,s=e.find,i=e.content,o=t[n].find(s);if("undefined"!==typeof o){var r=t[n].indexOf(o),a=Object(st["a"])(t[n]);Object.keys(i).forEach((function(t){o[t]=i[t]})),a[r]=o,t[n]=a}},fill:function(t,e){var n=e.key,s=e.content;t[n]=s},connected:function(t,e){t.connected=e},online:function(t,e){t.online=e},login:function(t,e){t.login=e},logoff:function(t){t.login=!1,t.connected=!1,t.tags=[],t.notes=[],t.rss=[],t.articles=[]}},actions:{connectAction:function(t){return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,s=t.state,["tags","notes","rss"].forEach((function(t){var e=localStorage.getItem(t);e&&n("fill",{key:t,content:JSON.parse(e)})})),!0===s.connected||"boolean"===typeof s.login){e.next=26;break}return n("connected","pending"),le=new ae["a"](s.login),e.next=7,le.init();case 7:return e.next=9,le.listGists();case 9:if(i=e.sent,0!=i.filter((function(t){return t.description==ce})).length){e.next=19;break}return e.next=13,le.createGist("rss","[]",ce);case 13:return o=e.sent,e.next=16,le.useGist({id:o});case 16:le=e.sent,e.next=22;break;case 19:return e.next=21,le.useGist({description:ce});case 21:le=e.sent;case 22:n("connected",!0),console.info("connected to gist"),Object.keys(le.files).forEach((function(t){if(["tags","notes","rss"].includes(t)){var e=le.files[t].content;n("fill",{key:t,content:JSON.parse(e)}),localStorage.getItem(t)||localStorage.setItem(t,e)}})),localStorage.setItem("gist",le.id);case 26:case"end":return e.stop()}}),e)})))()},loginAction:function(t,e){var n=t.commit,s=t.dispatch;n("login",e),localStorage.getItem("login")!=e&&localStorage.setItem("login",e),s("connectAction")},onlineAction:function(t,e){var n=t.commit;n("online",e);var s=function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("serviceWorker"in navigator)try{navigator.serviceWorker.controller.postMessage(JSON.stringify({online:e}))}catch(s){n||setTimeout((function(){t(e,!0)}),1e4)}};s()},gistChange:function(t,e){var n=t.commit,s=t.state,i=e.type,o=e.key,r=e.content,a=e.filter,c=e.find;n(i,{key:o,content:r,filter:a,find:c}),le.putContent(o,JSON.stringify(s[o]))},addRSS:function(t,e){var n=t.dispatch,s=t.state;console.info("adding rss source "+e);var i=s.rss.find((function(t){return t==e}));"undefined"===typeof i&&n("gistChange",{type:"add",key:"rss",content:e})},removeRSS:function(t,e){var n=t.dispatch,s=t.state,i=s.rss.find((function(t){return t==e}));"undefined"===typeof i?console.warn("source "+e+" not found, deletion aborted"):(console.info("removing rss source "+e),n("gistChange",{type:"remove",key:"rss",filter:function(t){return t!=e}}))},addNote:function(t,e){var n=t.dispatch,s=t.state,i=e.content,o=e.url;console.info("adding note"),o="undefined"!==typeof o&&o,n("gistChange",{type:"add",key:"notes",content:{content:i,url:o,id:Math.max.apply(Math,[0].concat(Object(st["a"])(s.notes.map((function(t){return t.id})))))+1,timestamp:(new Date).valueOf()}})},removeNote:function(t,e){var n=t.dispatch,s=t.state,i=s.notes.find((function(t){return t.id==e}));"undefined"===typeof i?console.warn("note #"+e+" not found, deletion aborted"):(console.info("removing note #"+e),n("gistChange",{type:"remove",key:"notes",filter:function(t){return t.id!=e}}))},editNote:function(t,e){var n=t.dispatch,s=e.id,i=e.content;console.info("editing note #"+s),n("gistChange",{type:"edit",key:"notes",find:function(t){return t.id==s},content:{content:i,timestamp:(new Date).valueOf()}})},tagArticle:function(t,e){var n=t.dispatch,s=t.state,i=e.url,o=e.title,r=e.tag;console.info("adding tag "+r+" to url "+i);var a=s.tags.find((function(t){return t.url==i}));if("undefined"===typeof a)n("gistChange",{type:"add",key:"tags",content:{url:i,title:o,tags:[r]}});else if(a.tags.includes(r)){var c=Object(st["a"])(a.tags.filter((function(t){return t!=r})));0==c.length?n("gistChange",{type:"remove",key:"tags",filter:function(t){return t.url!=i}}):n("gistChange",{type:"edit",key:"tags",find:function(t){return t.url==i},content:{tags:c}})}else n("gistChange",{type:"edit",key:"tags",find:function(t){return t.url==i},content:{tags:[].concat(Object(st["a"])(a.tags),[r])}})}},getters:{notesAbout:function(t){return function(e){return t.notes.filter((function(t){return t.url==e}))||[]}},tagsAbout:function(t){return function(e){return t.tags.find((function(t){return t.url==e}))||[]}},otherTags:function(t){return function(e,n){try{return t.tags.find((function(t){return t.url==e})).tags.filter((function(t){return t!=n}))}catch(s){return[]}}},taggedContent:function(t){return function(e){return t.tags.filter((function(t){return t.tags.includes(e)}))||[]}},allTags:function(t){var e=["fav","reviewed"];return t.tags.forEach((function(t){t.tags.map((function(t){e.some((function(e){return e==t}))||e.push(t)}))})),e}}});s["a"].config.productionTip=!1,new s["a"]({router:se,store:ue,render:function(t){return t(z)}}).$mount("#app")}});
//# sourceMappingURL=app.d13e10a9.js.map