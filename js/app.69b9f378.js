(function(t){function e(e){for(var r,a,o=e[0],c=e[1],u=e[2],d=0,h=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},s={app:0},i=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/spekti/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid invisible",attrs:{id:"app"}},[n("nav",{staticClass:"row navbar sticky-top navbar-expand navbar-light bg-light border-bottom border-info"},[n("h2",{staticClass:"text-info",on:{click:t.hideAll}},[t._v(t._s(t.appName))]),!1!==t.$root.spekti?n("ul",{staticClass:"navbar-nav ml-auto"},[n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{title:"Manage sources"},on:{click:function(e){return t.setModal("sources")}}},[t._v("Sources")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{title:"Manage tags"},on:{click:function(e){return t.setModal("tags")}}},[t._v("Tags")])]),n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{title:"Manage notes"},on:{click:t.showNotes}},[t._v("Notes")])])]):t._e()]),n("app-home",{attrs:{update:t.lastUpdate,tag:t.tag,notes:t.notes}}),n("app-modal",{attrs:{content:t.modal,update:t.lastUpdate,details:t.modalDetails}}),t._m(0)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"fixed-bottom text-right border-top border-info p-1 bg-light"},[n("small",{staticClass:"p-2"},[n("a",{attrs:{href:"https://github.com/corbin-c/spekti",title:"Spekti repository by corbin-c on Github"}},[t._v("Contribute on Github")])])])}],a=n("1da1"),o=(n("96cf"),n("fb6a"),n("d3b7"),n("d81d"),n("caad"),n("2532"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[!1===this.$root.logged?n("div",{staticClass:"text-center p-5 m-3"},[n("p",[t._v("In order to use Spekti, please login to your GitHub account and authorize the app.")]),n("p",[t._v("Spekti only uses your GitHub account to store data as Gists.")]),n("button",{staticClass:"btn btn-info mt-2",on:{click:t.helloLogin}},[t._v("Login with GitHub "),n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#mark-github-16",width:"20",height:"20"}})])])]):[!1!==t.tag?n("tag-view",{attrs:{tag:t.tag,update:t.update}}):!1!==t.notes?n("notes-view",{attrs:{update:t.update}}):n("main-view",{attrs:{update:t.update}})]],2)}),c=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:t.classes},[t.noSources?n("article",{staticClass:"card"},[n("p",{staticClass:"card-body"},[t._v("No source has been found. You can start "),n("a",{attrs:{href:"#",title:"add some content"},on:{click:t.showSources}},[t._v("adding some RSS feeds")]),t._v(" now !")])]):t._e(),!1!==t.singleArticle?n("article-view",{attrs:{content:t.singleArticle,fullContent:!1!==t.singleArticle}}):t._l(t.articles,(function(e){return n("article-view",{key:e.url,attrs:{content:e,fullContent:!1!==t.singleArticle}})}))],2)},l=[],d=n("2909"),h=(n("4de4"),n("9911"),n("99af"),n("262e")),f=n("2caf"),g=n("d4ec"),p=n("bee2"),m=(n("7db0"),n("a15b"),n("a4d3"),n("e01a"),"SpektiGist"),v=function(){function t(e,n){var r=this;Object(g["a"])(this,t),this.gist=e,this.file=n,this.content=[],this.isReady={},this.ready=new Promise((function(t){r.isReady=t})),this.getContent()}return Object(p["a"])(t,[{key:"getContent",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.gist.getContent(this.file);case 3:e=t.sent,console.info("retrieved "+this.file+" from gist"),this.content=JSON.parse(e),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.warn("file "+this.file+" not found in gist, will create...");case 11:this.isReady();case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"commitChanges",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gist.putContent(this.file,JSON.stringify(this.content));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"allContent",get:function(){var t=this;return new Promise((function(e){Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.ready;case 2:e(t.content);case 3:case"end":return n.stop()}}),n)})))()}))}}]),t}(),w=function(t){Object(h["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(g["a"])(this,n),e.apply(this,arguments)}return Object(p["a"])(n,[{key:"tagsAbout",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.allContent;case 2:return n=t.sent.find((function(t){return t.url==e})),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"tagArticle",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r,s,i,a,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=o.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=o[i];return console.info("adding tags "+s.join(", ")+" to url "+e),t.next=4,this.allContent;case 4:return a=t.sent.find((function(t){return t.url==e})),"undefined"===typeof a?this.content.push({url:e,title:n,tags:[].concat(s)}):s.map((function(t){a.tags.some((function(e){return e==t}))||a.tags.push(t)})),t.next=8,this.commitChanges();case 8:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"untagArticle",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r,s,i,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=a.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=a[s];return console.info("removing tags "+r.join(", ")+" to url "+e),t.next=4,this.allContent;case 4:if(i=t.sent.find((function(t){return t.url==e})),"undefined"!==typeof i){t.next=9;break}console.warn("article "+e+" not found, tag deletion aborted"),t.next=13;break;case 9:return i.tags=i.tags.filter((function(t){return!r.some((function(e){return e==t}))})),0==i.tags.length&&(this.content=this.content.filter((function(t){return t.url!=e}))),t.next=13,this.commitChanges();case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"allTags",get:function(){var t=this;return new Promise((function(e){Object(a["a"])(regeneratorRuntime.mark((function n(){var r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=["fav","reviewed"],n.next=3,t.allContent;case 3:s=n.sent,s.map((function(t){t.tags.map((function(t){r.some((function(e){return e==t}))||r.push(t)}))})),e(r);case 6:case"end":return n.stop()}}),n)})))()}))}}]),n}(v),b=function(t){Object(h["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(g["a"])(this,n),e.apply(this,arguments)}return Object(p["a"])(n,[{key:"makeNote",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],console.info("adding note"),t.next=4,this.nextId();case 4:return r=t.sent,this.content.push({content:e,url:n,id:r,timestamp:(new Date).valueOf()}),t.next=8,this.commitChanges();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"editNote",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("editing note #"+e),t.next=3,this.allContent;case 3:if(r=t.sent.find((function(t){return t.id==e})),"undefined"!==typeof r){t.next=8;break}console.warn("cannot edit note #"+e),t.next=12;break;case 8:return r.content=n,r.timestamp=(new Date).valueOf(),t.next=12,this.commitChanges();case 12:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"deleteNote",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("removing note #"+e),t.next=3,this.allContent;case 3:return this.content=t.sent.filter((function(t){return t.id!==e})),t.next=6,this.commitChanges();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"nextId",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=0,t.next=3,this.allContent;case 3:return t.sent.map((function(t){t.id>e&&(e=t.id)})),t.abrupt("return",e+1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"notesAbout",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.allContent;case 2:return t.abrupt("return",t.sent.filter((function(t){return t.url==e})));case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(v),k=function(t){Object(h["a"])(n,t);var e=Object(f["a"])(n);function n(){return Object(g["a"])(this,n),e.apply(this,arguments)}return Object(p["a"])(n,[{key:"addSource",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("adding source "+e),t.next=3,this.allContent;case 3:if(n=t.sent.find((function(t){return t==e})),"undefined"!==typeof n){t.next=8;break}return this.content.push(e),t.next=8,this.commitChanges();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeSource",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.info("removing source "+e),t.next=3,this.allContent;case 3:if(n=t.sent.find((function(t){return t==e})),"undefined"!==typeof n){t.next=8;break}console.warn("source "+e+" not found, deletion aborted"),t.next=13;break;case 8:return t.next=10,this.allContent;case 10:return this.content=t.sent.filter((function(t){return t!=e})),t.next=13,this.commitChanges();case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),n}(v),x={Tags:w,Notes:b,Sources:k},y=function(){function t(e,n){var r=this;Object(g["a"])(this,t),this.gist=e,this.entities=n,this.isReady={},this.ready=new Promise((function(t){r.isReady=t})),this.init()}return Object(p["a"])(t,[{key:"init",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.gist.listGists();case 2:if(e=t.sent,0!=e.filter((function(t){return t.description==m})).length){t.next=12;break}return t.next=6,this.gist.createGist(this.entities[0].filename,"[]",m);case 6:return n=t.sent,t.next=9,this.gist.useGist({id:n});case 9:this.gist=t.sent,t.next=15;break;case 12:return t.next=14,this.gist.useGist({description:m});case 14:this.gist=t.sent;case 15:console.info("connected to "+m+" gist"),this.entities.map((function(t){r[t.filename]=new x[t.type](r.gist,t.filename)})),this.isReady();case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),C=n("b85c"),$=(n("ac1f"),n("1276"),n("5319"),n("b64b"),"https://spekticors.herokuapp.com/"),O=[{title:["title"]},{link:["link"]},{img:["enclosure"]},{abstract:["content:encoded","description"]},{date:["pubDate","dc:date"]},{author:["author","dc:creator"]}],R=function(t){var e=new Date(t);return"Invalid Date"==e&&(t=t.split(", ")[1],t=t.replace(/ \w+$/,""),e=new Date(t)),e},j={enclosure:function(t){return null!==t.getAttribute("type")&&t.getAttribute("type").indexOf("image")>=0?t.getAttribute("url"):""},"content:encoded":function(t){return"#cdata-section"==t.firstChild.nodeName?(t=t.firstChild.data,t=(new DOMParser).parseFromString(t,"text/html").body.textContent):(t=t.textContent,t=(new DOMParser).parseFromString(t,"text/html").body.textContent),t},description:function(t){return t=t.textContent,t=(new DOMParser).parseFromString(t,"text/html").body.textContent,t},pubDate:function(t){return R(t.textContent)},"dc:date":function(t){return R(t.textContent)},other:function(t){return t.textContent}},N=function(){function t(e){Object(g["a"])(this,t),this.url=e,this.feed=[]}return Object(p["a"])(t,[{key:"loadFeed",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch($+this.url,{headers:{"spekti-no-cache":!0}});case 2:return e=t.sent,t.next=5,e.text();case 5:e=t.sent,e=(new DOMParser).parseFromString(e,"text/xml"),this.parseFeed(e);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"parseFeed",value:function(t){var e,n=this,r=Object(d["a"])(t.querySelectorAll("item")),s=Object(C["a"])(r);try{var i=function(){var t=e.value,r={};O.map((function(e){r[Object.keys(e)[0]]="";var s,i=Object(C["a"])(e[Object.keys(e)[0]]);try{for(i.s();!(s=i.n()).done;){var a=s.value;try{r[Object.keys(e)[0]]=n.getElement(t,a);break}catch(o){console.warn("Missing element while building feed")}}}catch(c){i.e(c)}finally{i.f()}})),r.img=""==r.img?n.getImage(t):r.img,n.feed.push(r)};for(s.s();!(e=s.n()).done;)i()}catch(a){s.e(a)}finally{s.f()}}},{key:"getElement",value:function(t,e){try{var n=t.getElementsByTagName(e)[0];return"undefined"===typeof j[e]?j.other(n):j[e](n)}catch(r){throw new Error("Element not found")}}},{key:"getImage",value:function(t){try{var e=t.querySelector("img");return e.getAttribute("src")}catch(r){try{var n=t.getElementsByTagName("content:encoded")[0];if("#cdata-section"==n.firstChild.nodeName)return n=n.firstChild.data,n=(new DOMParser).parseFromString(n,"text/html"),this.getImage(n)}catch(s){return console.warn("No image found"),""}}}}]),t}(),_=n("823f"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{class:t.articleClasses},[n("div",{staticClass:"card mb-3"},[n("div",{class:t.headerClasses},[t.content.img.length>0?n("img",{class:t.imgClasses,attrs:{src:t.content.img,alt:t.content.title},on:{click:t.toggleFullContent}}):t._e(),n("h3",{class:t.titleClasses,on:{click:t.toggleFullContent}},[t._v(" "+t._s(t.content.title)+" ")])]),t.fullContent?n("tag-bar",{attrs:{url:t.content.link,title:t.content.title}}):t._e(),t.fullContent?n("div",{staticClass:"card-body"},[n("p",{class:t.contentClasses,domProps:{innerHTML:t._s(t.readerContent)}})]):n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text"},[t._v(t._s(t.abstract))])]),t.fullContent?n("button",{staticClass:"btn btn-info",attrs:{type:"button",id:"close","data-dismiss":"modal","aria-label":"Close"},on:{click:t.toggleFullContent}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]):t._e(),n("div",{staticClass:"card-footer"},[n("p",{staticClass:"card-text"},[n("small",{staticClass:"text-muted"},[t._v(" "+t._s(t.footer)),n("a",{attrs:{href:t.content.link,title:"Open article « "+t.content.title+" »",target:"_blank"}},[t._v("Source")])])])])],1)])},A=[],S=n("884f"),M="https://spekticors.herokuapp.com/",D=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(M+e);case 2:return n=t.sent,t.next=5,n.text();case 5:return n=t.sent,n=(new DOMParser).parseFromString(n,"text/html"),n.originURI=e,t.abrupt("return",new S["a"](n).parse());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header sticky-top tagbar d-flex justify-content-around"},[t.isFav?n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"unfav this article"},on:{click:function(e){return t.removeTag("fav")}}},[n("svg",{staticClass:"d-inline"},[n("use",{staticClass:"regular",attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-fill-24"}}),n("use",{staticClass:"hover",attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-slash-fill-24"}})])]):n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"fav this article"},on:{click:function(e){return t.addTag("fav")}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#bookmark-24"}})])]),t.isReviewed?n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"mark this article as unseen"},on:{click:function(e){return t.removeTag("reviewed")}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#eye-slash-24"}})])]):n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"mark this article as seen"},on:{click:function(e){return t.addTag("reviewed")}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#eye-24"}})])]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"add a custom tag to this article"},on:{click:t.showTags}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#plus-24"}})])]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{title:"add a note to this article"},on:{click:t.showNotes}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-24"}})])])])},P=[],F={data:function(){return{allTags:[]}},computed:{isFav:function(){return this.allTags.includes("fav")},isReviewed:function(){return this.allTags.includes("reviewed")}},methods:{getTags:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.tags.tagsAbout(t.url);case 2:n=e.sent,t.allTags="undefined"!==typeof n?n.tags:[];case 4:case"end":return e.stop()}}),e)})))()},showTags:function(){this.$root.$emit("showModal","tags-about"),this.$root.$emit("modalDetails",{url:this.url,title:this.title})},showNotes:function(){this.$root.$emit("showModal","notes-about"),this.$root.$emit("modalDetails",this.url)},addTag:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.tags.tagArticle(e.url,e.title,t);case 2:e.$root.$emit("update"),e.getTags();case 4:case"end":return n.stop()}}),n)})))()},removeTag:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.tags.untagArticle(e.url,t);case 2:e.$root.$emit("update"),e.getTags();case 4:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getTags()},props:["url","title"]},U=F,I=n("2877"),L=Object(I["a"])(U,E,P,!1,null,null,null),G=L.exports,Y={data:function(){return{readerContent:""}},components:{"tag-bar":G},computed:{footer:function(){return""==this.date&&""==this.content.author?"":""==this.content.author?this.date:""==this.content.date?this.content.author+" – ":this.content.author+" – "+this.date},date:function(){try{return this.content.date.toLocaleDateString()+" – "+this.content.date.toLocaleTimeString()+" – "}catch(t){return""}},contentClasses:function(){return{"card-text":this.readerContent.length>0,"spinner-grow":0==this.readerContent.length,"my-3":0==this.readerContent.length,"text-info":0==this.readerContent.length}},headerClasses:function(){return{"card-header":this.fullContent,row:this.fullContent,"no-gutters":this.fullContent,"align-items-center":this.fullContent}},articleClasses:function(){return{col:!this.fullContent}},titleClasses:function(){return{"card-title":!0,"card-header":!this.fullContent,"col-md-10":this.fullContent,"pl-4":this.fullContent,"my-auto":this.fullContent}},imgClasses:function(){return{"card-img-top":!this.fullContent,"col-md-2":this.fullContent,rounded:this.fullContent}},abstract:function(){var t,e=this.content.abstract.split(" "),n=[],r=Object(C["a"])(e);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(n.push(s),n.join(" ").length>300)break}}catch(i){r.e(i)}finally{r.f()}return n.join(" ")+" […]"}},methods:{toggleFullContent:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$parent.$emit("showFullArticle",t.content),t.$parent.$emit("hideArticle","");case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.fullContent){e.next=10;break}return window.scrollTo(0,0),e.next=4,D(t.content.link);case 4:n=e.sent,""==t.content.title&&(t.content.title=n.title),""==t.content.author&&(t.content.author=""==n.byline?n.siteName:n.byline),t.readerContent=n.content,e.next=11;break;case 10:window.scrollTo(0,t.$root.scrollY);case 11:case"end":return e.stop()}}),e)})))()},props:["content","fullContent"]},W=Y,J=Object(I["a"])(W,T,A,!1,null,null,null),H=J.exports,q=12,B={data:function(){return{maxItems:q,ready:!1,noSources:!1,singleArticle:!1,allArticles:[],tags:[]}},computed:{articles:function(){var t=this.tags.filter((function(t){return t.tags.includes("reviewed")})).map((function(t){return t.url}));return this.allArticles.filter((function(e){return!t.includes(e.link)})).sort((function(t,e){return e.date-t.date})).slice(0,this.maxItems)},classes:function(){return{"spinner-grow":!this.ready,"text-info":!this.ready,row:this.ready&&!this.noSources&&!this.singleArticle,"row-cols-1":this.ready&&!this.noSources&&!this.singleArticle,"row-cols-sm-2":this.ready&&!this.noSources&&!this.singleArticle,"row-cols-lg-3":this.ready&&!this.noSources&&!this.singleArticle,"row-cols-xl-4":this.ready&&!this.noSources&&!this.singleArticle,"mt-3":this.ready&&!this.noSources,"mb-5":this.ready&&!this.noSources,"text-center":this.ready&&this.noSources,"p-5":this.ready&&this.noSources,"m-3":this.ready&&this.noSources}}},watch:{update:function(){this.loadContent()}},created:function(){this.$on("showFullArticle",this.showArticle),this.$root.$on("closeFullArticle",this.hideArticle)},components:{"article-view":H},methods:{scroll:function(){var t=this;window.onscroll=function(){if(!1===t.singleArticle&&t.ready){t.$root.scrollY=document.documentElement.scrollTop;var e=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)+window.innerHeight;e>=document.documentElement.offsetHeight-.075*window.innerHeight&&(t.maxItems+=q)}}},hideArticle:function(){this.singleArticle=!1},showArticle:function(t){this.singleArticle=this.singleArticle!==t&&t},loadContent:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.ready;case 2:return e.next=4,t.$root.spekti.rss.allContent;case 4:return n=e.sent,e.next=7,t.$root.spekti.tags.allContent;case 7:t.tags=e.sent,0==n.length?(t.noSources=!0,t.allArticles=[]):(t.noSources=!1,r=[],n.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new N(n),e.next=3,n.loadFeed();case 3:r=[].concat(Object(d["a"])(r),Object(d["a"])(n.feed)),n.feed.map((function(e){t.allArticles.includes(e)||t.allArticles.push(e),t.ready||(t.ready=!0)})),t.allArticles=t.allArticles.filter((function(t){return r.includes(t)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)})))()},showSources:function(){this.$root.$emit("showModal","sources")}},mounted:function(){this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new _["a"](this.$root.logged),t.next=3,e.init();case 3:return n=[{filename:"rss",type:"Sources"},{filename:"tags",type:"Tags"},{filename:"notes",type:"Notes"}],this.$root.spekti=new y(e,n),this.loadContent(),this.scroll(),t.prev=7,t.next=10,this.$root.spekti.ready;case 10:navigator.serviceWorker.controller.postMessage("FORCE SYNC"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](7),console.log("not ready yet");case 16:case"end":return t.stop()}}),t,this,[[7,13]])}))))},props:["update"]},V=B,z=Object(I["a"])(V,u,l,!1,null,null,null),K=z.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3 mb-5"},[!1!==t.viewArticle?n("article-view",{attrs:{content:t.viewArticle,fullContent:!1!==t.viewArticle}}):n("div",{staticClass:"card mb-3"},[n("h3",{staticClass:"card-header card-title"},[t._v('Articles tagged "'+t._s(t.tag)+'"')]),0==t.taggedContent.length?n("p",{staticClass:"card-body card-text"},[t._v("There is no content for this tag yet. Start reviewing or tagging articles to see something here.")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.taggedContent,(function(e){return n("li",{key:e.url,staticClass:"list-group-item d-flex justify-content-between align-items-center",on:{click:t.showArticle}},[t._v(" "+t._s(e.title)+" "),n("span",{staticClass:"d-none"},[t._v(t._s(e.url))]),t._l(t.otherTags(e),(function(e){return n("span",{key:e,staticClass:"badge badge-info badge-pill",on:{click:function(n){return t.changeTag(e)}}},[t._v(t._s(e))])}))],2)})),0)])],1)},X=[],Z={data:function(){return{allTags:[],viewArticle:!1}},watch:{update:function(){this.getTags()}},computed:{taggedContent:function(){var t=this;return this.allTags.filter((function(e){return e.tags.includes(t.tag)}))}},components:{"article-view":H},methods:{showArticle:function(t){if("SPAN"!==t.target.nodeName){var e=t.target.querySelector("span").innerText;e=this.taggedContent.find((function(t){return t.url==e})),this.viewArticle={title:e.title,link:e.url,author:"",date:"",img:""}}},otherTags:function(t){var e=this;return this.allTags.find((function(e){return e.url==t.url})).tags.filter((function(t){return t!=e.tag}))},changeTag:function(t){this.$root.$emit("showTag",t)},hideArticle:function(){this.viewArticle=!1},getTags:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.tags.allContent;case 2:t.allTags=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},created:function(){this.$root.$on("showTag",this.hideArticle),this.$on("hideArticle",this.hideArticle)},mounted:function(){this.getTags()},props:["tag"]},tt=Z,et=Object(I["a"])(tt,Q,X,!1,null,null,null),nt=et.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"mt-3 mb-5"},[!1!==t.viewArticle?n("article-view",{attrs:{content:t.viewArticle,fullContent:!1!==t.viewArticle}}):n("div",{staticClass:"card mb-3"},[n("h3",{staticClass:"card-header card-title"},[t._v("Notes")]),0==t.allNotes.length?n("p",{staticClass:"card-body card-text"},[t._v("There is no note yet. Write your first note now!")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.allNotes,(function(e){return n("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("span",{staticClass:"w-75"},[t._v(t._s(e.content))]),n("span",[t._v(t._s(new Date(e.timestamp).toLocaleDateString()))]),n("span",{class:t.sourceClasses(e.url),on:{click:function(n){return t.showArticle(e.url)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#link-16"}})])]),n("span",{staticClass:"badge-edit badge badge-pill",on:{click:function(n){return t.editNote(e.id,e.content)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-16"}})])]),n("span",{staticClass:"badge-delete badge badge-pill",on:{click:function(n){return t.deleteNote(e.id)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])])})),0),n("div",{staticClass:"card-footer bg-light d-flex justify-content-around align-items-center"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newNote,expression:"newNote"}],staticClass:"form-control",attrs:{placeholder:"New note"},domProps:{value:t.newNote},on:{input:function(e){e.target.composing||(t.newNote=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.submitNote}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])],1)},st=[],it={data:function(){return{newNote:"",notes:[],viewArticle:!1,edit:!1}},computed:{allNotes:function(){return this.notes},disabled:function(){return 0==this.newNote.length}},components:{"article-view":H},methods:{showArticle:function(t){this.viewArticle={title:"",link:t,author:"",date:"",img:""}},sourceClasses:function(t){return{"badge-source":!0,badge:!0,"badge-pill":!0,hidden:!1===t}},hideArticle:function(){this.viewArticle=!1},submitNote:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.edit){e.next=5;break}return e.next=3,t.addNote();case 3:e.next=12;break;case 5:return n=t.newNote,t.newNote="",e.next=9,t.$root.spekti.ready;case 9:return e.next=11,t.$root.spekti.notes.editNote(t.edit,n);case 11:t.edit=!1;case 12:case"end":return e.stop()}}),e)})))()},addNote:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.newNote,t.newNote="",e.next=4,t.$root.spekti.ready;case 4:return e.next=6,t.$root.spekti.notes.makeNote(n);case 6:t.newNote="",t.getNotes();case 8:case"end":return e.stop()}}),e)})))()},deleteNote:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.ready;case 2:return n.next=4,e.$root.spekti.notes.deleteNote(t);case 4:e.getNotes();case 5:case"end":return n.stop()}}),n)})))()},editNote:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.edit=t,n.newNote=e;case 2:case"end":return r.stop()}}),r)})))()},getNotes:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.ready;case 2:return e.next=4,t.$root.spekti.notes.allContent;case 4:t.notes=e.sent;case 5:case"end":return e.stop()}}),e)})))()}},created:function(){this.$root.$on("closeFullArticle",this.hideArticle),this.$on("hideArticle",this.hideArticle)},mounted:function(){this.getNotes()},props:["update"]},at=it,ot=Object(I["a"])(at,rt,st,!1,null,null,null),ct=ot.exports,ut={mounted:function(){this.$nextTick((function(){console.log(this.$root.logged)}))},methods:{helloLogin:function(){this.$root.$emit("hello-login",!0)}},components:{"main-view":K,"tag-view":nt,"notes-view":ct},props:["update","tag","notes"]},lt=ut,dt=Object(I["a"])(lt,o,c,!1,null,null,null),ht=dt.exports,ft=n("6794"),gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[this.content?n("div",[n("aside",{staticClass:"modal d-block",attrs:{tabindex:"-1"},on:{click:t.hide}},[n("div",{staticClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",attrs:{id:"dialog"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v(t._s(t.title))]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:t.close}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),n(t.currentComponent,{tag:"component",attrs:{update:t.update,details:t.details}})],1)])]),n("div",{staticClass:"modal-backdrop"})]):t._e()])},pt=[],mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-scroll"},[n("ul",{staticClass:"sources list-group list-group-flush"},t._l(t.allSources,(function(e){return n("li",{key:e,staticClass:"list-group-item  d-flex justify-content-between align-items-center"},[t._v(" "+t._s(t.sourceReplace(e))+" "),n("span",{staticClass:"badge badge-pill",on:{click:function(n){return t.removeSource(e)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])])})),0),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.sourceUrl,expression:"sourceUrl"}],class:t.inputClasses,attrs:{type:"text",placeholder:"New source URL"},domProps:{value:t.sourceUrl},on:{input:function(e){e.target.composing||(t.sourceUrl=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.addSource}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},vt=[],wt={data:function(){return{sources:[],sourceUrl:""}},watch:{update:function(){this.getSources()}},computed:{allSources:function(){return this.sources},inputClasses:function(){var t="form-control mx-auto";return""===this.sourceUrl||this.testURL(this.sourceUrl)||(t+=" is-invalid"),t},disabled:function(){return!this.testURL(this.sourceUrl)}},methods:{sourceReplace:function(t){return t.replace(/^http[s]*:\/\/[www.]*/,"")},getSources:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.ready;case 2:return e.next=4,t.$root.spekti.rss.allContent;case 4:t.sources=e.sent;case 5:case"end":return e.stop()}}),e)})))()},testURL:function(t){var e=/^(http|https):\/\/[^ "]+$/;return e.test(t)},addSource:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.testURL(t.sourceUrl)){e.next=9;break}return e.next=3,t.$root.spekti.ready;case 3:return e.next=5,t.$root.spekti.rss.addSource(t.sourceUrl);case 5:t.sourceUrl="",t.$root.$emit("update"),e.next=10;break;case 9:alert("This URL doesn't look right, please try again");case 10:case"end":return e.stop()}}),e)})))()},removeSource:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.ready;case 2:return n.next=4,e.$root.spekti.rss.removeSource(t);case 4:e.$root.$emit("update");case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getSources()},props:["update"]},bt=wt,kt=Object(I["a"])(bt,mt,vt,!1,null,null,null),xt=kt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-body d-flex justify-content-around flex-wrap align-content-around"},[0==t.allTags.length?n("p",[t._v("There is no tag yet. Start reviewing or tagging articles to see something here.")]):t._l(t.allTags,(function(e){return n("button",{key:e,staticClass:"btn btn-outline-secondary my-2",on:{click:function(n){return t.showTag(e)}}},[t._v(t._s(e))])}))],2)},Ct=[],$t={data:function(){return{tags:[]}},computed:{allTags:function(){return this.tags}},methods:{getTags:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.ready;case 2:return e.next=4,t.$root.spekti.tags.allTags;case 4:t.tags=e.sent;case 5:case"end":return e.stop()}}),e)})))()},showTag:function(t){this.$root.$emit("showTag",t),this.$parent.close()}},mounted:function(){this.getTags()}},Ot=$t,Rt=Object(I["a"])(Ot,yt,Ct,!1,null,null,null),jt=Rt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal-body d-flex justify-content-around flex-wrap align-content-around"},[0==t.allTags.length?n("p",[t._v("There is no tag yet. You can add a custom tag using the input below.")]):t._l(t.allTags,(function(e){return n("button",{key:e,class:t.tagClasses(e),attrs:{title:t.title(e)},on:{click:function(n){return t.toggle(e)}}},[t._v(t._s(e))])}))],2),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newTag,expression:"newTag"}],staticClass:"form-control mx-auto",attrs:{type:"text",placeholder:"New tag"},domProps:{value:t.newTag},on:{input:function(e){e.target.composing||(t.newTag=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.addTag}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},_t=[],Tt={data:function(){return{tags:[],tagsAbout:[],newTag:""}},computed:{disabled:function(){return 0==this.newTag.length},allTags:function(){return this.tags.filter((function(t){return!["fav","reviewed"].includes(t)}))},aboutTags:function(){return this.tagsAbout.filter((function(t){return!["fav","reviewed"].includes(t)}))}},methods:{title:function(t){return this.tagsAbout.includes(t)?"Remove tag "+t+" from this article":"Add tag "+t+" from this article"},tagClasses:function(t){return{btn:!0,"my-2":!0,"btn-outline-secondary":!this.tagsAbout.includes(t),"btn-secondary":this.tagsAbout.includes(t)}},thisTags:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.tags.tagsAbout(t.details.url);case 2:n=e.sent,t.tagsAbout="undefined"!==typeof n?n.tags:[];case 4:case"end":return e.stop()}}),e)})))()},getTags:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.tags.allTags;case 2:t.tags=e.sent;case 3:case"end":return e.stop()}}),e)})))()},addTag:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return"string"!==typeof t&&(t=e.newTag,e.newTag=""),n.next=3,e.$root.spekti.tags.tagArticle(e.details.url,e.details.title,t);case 3:e.getTags(),e.thisTags();case 5:case"end":return n.stop()}}),n)})))()},removeTag:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.tags.untagArticle(e.details.url,t);case 2:e.getTags(),e.thisTags();case 4:case"end":return n.stop()}}),n)})))()},toggle:function(t){this.tagsAbout.includes(t)?this.removeTag(t):this.addTag(t)}},mounted:function(){this.getTags(),this.thisTags()},props:["update","details"]},At=Tt,St=Object(I["a"])(At,Nt,_t,!1,null,null,null),Mt=St.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"modal-body justify-content-around flex-wrap align-content-around"},[0==t.allNotes.length?n("p",[t._v("There is no note yet. You can add a note using the input below.")]):n("ul",{staticClass:"list-group list-group-flush"},t._l(t.allNotes,(function(e){return n("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[n("span",{staticClass:"w-50"},[t._v(t._s(e.content))]),n("span",[t._v(t._s(new Date(e.timestamp).toLocaleDateString()))]),n("span",{staticClass:"badge-edit badge badge-pill",on:{click:function(n){return t.editNote(e.id,e.content)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#pencil-16"}})])]),n("span",{staticClass:"badge-delete badge badge-pill",on:{click:function(n){return t.deleteNote(e.id)}}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#trashcan-16"}})])])])})),0)]),n("div",{staticClass:"modal-footer bg-light"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newNote,expression:"newNote"}],staticClass:"form-control mx-auto",attrs:{type:"text",placeholder:"New note"},domProps:{value:t.newNote},on:{input:function(e){e.target.composing||(t.newNote=e.target.value)}}}),n("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:t.disabled},on:{click:t.submitNote}},[n("svg",{staticClass:"d-inline"},[n("use",{attrs:{"xlink:href":"/octicons-sprite/octicons-sprite.svg#check-circle-24"}})])])])])},Et=[],Pt={data:function(){return{newNote:"",notes:[],edit:!1}},computed:{allNotes:function(){return this.notes},disabled:function(){return 0==this.newNote.length}},methods:{submitNote:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!1!==t.edit){e.next=5;break}return e.next=3,t.addNote();case 3:e.next=12;break;case 5:return n=t.newNote,t.newNote="",e.next=9,t.$root.spekti.ready;case 9:return e.next=11,t.$root.spekti.notes.editNote(t.edit,n);case 11:t.edit=!1;case 12:case"end":return e.stop()}}),e)})))()},addNote:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.newNote,t.newNote="",e.next=4,t.$root.spekti.ready;case 4:return e.next=6,t.$root.spekti.notes.makeNote(n,t.details);case 6:t.newNote="",t.getNotes();case 8:case"end":return e.stop()}}),e)})))()},deleteNote:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$root.spekti.ready;case 2:return n.next=4,e.$root.spekti.notes.deleteNote(t);case 4:e.getNotes();case 5:case"end":return n.stop()}}),n)})))()},editNote:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.edit=t,n.newNote=e;case 2:case"end":return r.stop()}}),r)})))()},getNotes:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.spekti.ready;case 2:return e.next=4,t.$root.spekti.notes.notesAbout(t.details);case 4:t.notes=e.sent;case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getNotes()},props:["update","details"]},Ft=Pt,Ut=Object(I["a"])(Ft,Dt,Et,!1,null,null,null),It=Ut.exports,Lt={computed:{title:function(){return"tags-about"==this.content?"tags about this article":"notes-about"==this.content?"notes about this article":this.content},currentComponent:function(){return["sources","tags","tags-about","notes-about"].indexOf(this.content)>=0&&this.content+"-view"}},components:{"sources-view":xt,"tags-view":jt,"tags-about-view":Mt,"notes-about-view":It},methods:{hide:function(t){"ASIDE"===t.target.nodeName&&this.$root.$emit("hideModal","")},close:function(){this.$root.$emit("hideModal","")}},props:["content","update","details"]},Gt=Lt,Yt=Object(I["a"])(Gt,gt,pt,!1,null,null,null),Wt=Yt.exports,Jt={name:"App",data:function(){return{appName:"Spekti",currentRoute:window.location.pathname.slice(11),modal:!1,modalDetails:!1,tag:!1,notes:!1,lastUpdate:(new Date).valueOf()}},mounted:function(){var t=this;Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/spekti/online");case 2:return n=e.sent,e.next=5,n.text();case 5:n=e.sent,"false"==n&&(t.$root.logged=!0);case 7:case"end":return e.stop()}}),e)})))(),ft["on"]("auth.login",(function(e){t.$root.logged=e.authResponse.access_token})),ft["init"]({github:"e039324ddce920ed3111"}),document.querySelector(".spinner-grow").remove(),document.querySelector("#app").classList.remove("invisible"),history.pushState(null,null,window.location.href),window.addEventListener("popstate",function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.preventDefault(),history.pushState(null,window.location.href,window.location.href),r=t.$root.scrollY,t.hideAll(),e.next=6,function(){return new Promise((function(t){setTimeout(t,100)}))}();case 6:window.scrollTo(0,r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},created:function(){this.registerWorker(),this.$root.$on("hideModal",this.hideModal),this.$root.$on("showModal",this.setModal),this.$root.$on("modalDetails",this.setModalDetails),this.$root.$on("update",this.updateView),this.$root.$on("showTag",this.showTag),this.$root.$on("hello-login",this.login)},components:{"app-home":ht,"app-modal":Wt},methods:{login:function(){ft["login"]("github",{scope:"gist"})},registerWorker:function(){var t=this;"serviceWorker"in navigator&&(navigator.serviceWorker.register("/spekti/service-worker.js").then((function(t){return t.update()})),localStorage.setItem("synced",!0),navigator.serviceWorker.onmessage=function(e){var n=JSON.parse(e.data),r=localStorage.getItem("spekti-keys")||"[]";r=JSON.parse(r),"GET"==n.method?(n.body={},r.map((function(t){n.body[t]=localStorage.getItem(t)}))):"SYNC"==n.method?(n.body={},n.body.token=t.$root.logged,n.body.gistId=t.$root.spekti.gist.id):"CLEAR"==n.method?localStorage.setItem("synced","true"):n.init&&"true"!==localStorage.getItem("synced")||(r.includes(n.key)||(r.push(n.key),localStorage.setItem("spekti-keys",JSON.stringify(r))),localStorage.setItem(n.key,n.body),n.init||localStorage.setItem("synced","false")),navigator.serviceWorker.controller.postMessage(JSON.stringify(n))},navigator.serviceWorker.ready.then((function(t){return t.sync.register("gistSync")})))},setModal:function(t){this.modal=t},setModalDetails:function(t){this.modalDetails=t},showTag:function(t){this.notes=!1,this.tag=t},showNotes:function(){this.hideArticle(),this.tag=!1,this.notes=!0},hideNotes:function(){this.notes=!1},updateView:function(){this.lastUpdate=(new Date).valueOf()},hideModal:function(){this.setModal(!1),this.setModalDetails(!1)},hideArticle:function(){this.$emit("closeFullArticle","")},hideTags:function(){this.tag=!1},hideAll:function(){this.hideArticle(),this.hideTags(),this.hideNotes()}}},Ht=Jt,qt=Object(I["a"])(Ht,s,i,!1,null,null,null),Bt=qt.exports;r["a"].config.productionTip=!1,new r["a"]({data:function(){return{logged:!1,spekti:!1,scrollY:0}},render:function(t){return t(Bt)}}).$mount("#app")}});
//# sourceMappingURL=app.69b9f378.js.map